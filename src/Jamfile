import testing ;

alias dist
	: dist-bin
	  dist-etc
	;

install dist-bin
	: wbd
	: <location>$(DIST_DIR)/bin
	;

install dist-etc
	: ../doc/wbd.cfg
	: <location>$(DIST_DIR)/etc
	;

exe wbd
	: main.cpp
	  options.cpp
	  fetcher.cpp
	  tcp_server.cpp
	  tcp_connection.cpp
	  searcher
	  boost_filesystem
	  boost_program_options
	  boost_thread
	  soci_core-gcc-2_2
	  soci_postgresql-gcc-2_2
	;

lib searcher
	: searcher.cpp
	: <link>static
	;

lib boost_filesystem ;
lib boost_program_options ;
lib boost_thread ;
lib soci_core-gcc-2_2 ;
lib soci_postgresql-gcc-2_2 ;
